{% extends "base.html" %}
{% load static %}

{% block title %}Dashboard · Hospital Appointments{% endblock %}

{% block content %}
<div class="row g-4">
  <div class="col-md-4">
    <div class="card shadow-sm border-0 stat-card">
      <div class="card-body">
        <h6 class="text-muted text-uppercase mb-2">Doctors</h6>
        <h2 class="fw-bold">{{ total_doctors }}</h2>
        <p class="mb-0 text-muted small">Registered specialists</p>
      </div>
    </div>
  </div>
  <div class="col-md-4">
    <div class="card shadow-sm border-0 stat-card">
      <div class="card-body">
        <h6 class="text-muted text-uppercase mb-2">Total Appointments</h6>
        <h2 class="fw-bold">{{ total_appointments }}</h2>
        <p class="mb-0 text-muted small">All time</p>
      </div>
    </div>
  </div>
  <div class="col-md-4">
    <div class="card shadow-sm border-0 bg-primary text-white stat-card">
      <div class="card-body">
        <h6 class="text-uppercase mb-2">Quick Action</h6>
        <p class="mb-3">Schedule a new appointment for a patient.</p>
        <a href="{% url 'appointments:book_appointment' %}" class="btn btn-light btn-sm fw-semibold">
          Book Appointment
        </a>
      </div>
    </div>
  </div>
</div>

<div class="row mt-4">
  <div class="col-lg-7 mb-4">
    <div class="card shadow-sm border-0 h-100">
      <div class="card-header bg-white border-0 d-flex justify-content-between align-items-center">
        <h5 class="mb-0">Upcoming Appointments</h5>
      </div>
      <div class="card-body">
        {% if upcoming_appointments %}
          <div class="list-group list-group-flush">
            {% for appt in upcoming_appointments %}
              <div class="list-group-item d-flex justify-content-between align-items-center px-0">
                <div>
                  <div class="fw-semibold">{{ appt.patient.full_name }}</div>
                  <div class="small text-muted">
                    {{ appt.date }} · {{ appt.time }} · {{ appt.doctor.name }} ({{ appt.doctor.specialty }})
                  </div>
                </div>
                <span class="badge bg-outline-primary text-primary text-capitalize">
                  {{ appt.status }}
                </span>
              </div>
            {% endfor %}
          </div>
        {% else %}
          <p class="text-muted mb-0">No upcoming appointments yet.</p>
        {% endif %}
      </div>
    </div>
  </div>
  <div class="col-lg-5 mb-4">
    <div class="card shadow-sm border-0 h-100">
      <div class="card-header bg-white border-0">
        <h5 class="mb-0">Top Doctors</h5>
      </div>
      <div class="card-body">
        {% if top_doctors %}
          <ul class="list-group list-group-flush">
            {% for doctor in top_doctors %}
              <li class="list-group-item px-0 d-flex justify-content-between align-items-center">
                <div>
                  <div class="fw-semibold">{{ doctor.name }}</div>
                  <div class="small text-muted">{{ doctor.specialty }}</div>
                </div>
                <span class="badge bg-secondary-subtle text-secondary">
                  {{ doctor.num_appointments }} appointments
                </span>
              </li>
            {% endfor %}
          </ul>
        {% else %}
          <p class="text-muted mb-0">No doctors registered yet.</p>
        {% endif %}
      </div>
    </div>
  </div>
</div>
{% endblock %}

